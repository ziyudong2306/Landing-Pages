/* 31 AUG 2023, identity iframe, build from paypal-muse-components */
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={oneHour:36e5,sevenDays:6048e5,oneMonth:2592e6,cartLimit:10,accessTokenUrl:"https://www.paypal.com/muse/api/partner-token",storage:{paypalCrUser:"paypal-cr-user",paypalCrCart:"paypal-cr-cart",paypalCrPropertyId:"paypal-cr-propid",paypalCrContainer:"paypal-cr-container",paypalSDKIdentity:"paypal-sdk-identity",paypalSDKConsoleDebug:"paypal-sdk-console-debug"},defaultTrackerConfig:{user:{id:null,email:null,name:null}},defaultCountry:"US",IDENTITY_MESSAGES:{FETCH_ERROR:"fetch_identity_error",USER_INFO_REQUEST:"fetch_identity_request",USER_COUNTRY_MESSAGE:"fetch_identity_country"}}},function(e,t,n){"use strict";var r=n(0)(n(0)),o=n(3),a=(0,r.default)(o),u=n(4),i=n(5),c=n(1),s=(0,r.default)(c),l=s.default.IDENTITY_MESSAGES,f=s.default.defaultCountry;window.addEventListener("message",function(){var e=(0,a.default)((function*(e){switch(e.data.type){case l.USER_INFO_REQUEST:yield d(e);break;case l.USER_COUNTRY_MESSAGE:yield p();break;default:return}}));return function(t){return e.apply(this,arguments)}}());var d=function(){var e=(0,a.default)((function*(e){try{var t=yield(0,u.fetchVisitorInfo)(e.data.payload);window.parent.postMessage({type:l.USER_INFO_REQUEST,payload:t},"*")}catch(e){window.parent.postMessage({type:l.FETCH_ERROR,payload:e},"*"),window.parent.postMessage({type:l.USER_INFO_REQUEST,payload:{}},"*")}}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.default)((function*(){var e=f;try{e=yield(0,i.fetchUserCountry)()}catch(e){window.parent.postMessage({type:l.FETCH_ERROR,payload:e},"*")}window.parent.postMessage({type:l.USER_COUNTRY_MESSAGE,payload:e},"*")}));return function(){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";function r(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var u=e.apply(t,n);function i(e){r(u,o,a,i,c,"next",e)}function c(e){r(u,o,a,i,c,"throw",e)}i(void 0)}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.fetchVisitorInfo=function(e){var t=e.deviceInfo,n=e.country,r=encodeURIComponent(JSON.stringify(t)),o={method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'{ visitorInfo(\n        country: "'+n+'",\n        deviceInfo: "'+r+'"\n      ) }'})};return o.headers["disable-set-cookie"]=!0,fetch("/targeting/graphql",o).then((function(e){if(200!==e.status)throw new Error("targeting responded with statuscode "+e.status);return e.json()})).then((function(e){if(!e||!e.data||!e.data.visitorInfo)throw new Error("response missing required fields");return e.data.visitorInfo}))}},function(e,t,n){"use strict";var r=n(0)(n(0));Object.defineProperty(t,"__esModule",{value:!0}),t.fetchUserCountry=void 0;var o=n(1),a=(0,r.default)(o).default.defaultCountry;t.fetchUserCountry=function(){return fetch("https://www.paypalobjects.com/muse/noop.js",{mode:"no-cors"}).then((function(e){e.text().then((function(){}));var t=e.headers.get("x-client-location");return null===t?a:t})).catch((function(){return a}))}}]);
